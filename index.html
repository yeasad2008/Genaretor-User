<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Generator</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #0f0f0f;
            --card-bg: #1a1a1a;
            --primary-color: #6a5acd;
            --primary-hover: #7b68ee;
            --text-color: #e0e0e0;
            --text-muted: #a0a0a0;
            --border-color: #333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            background-image: 
                radial-gradient(circle at 20% 50%, rgba(106, 90, 205, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(106, 90, 205, 0.1) 0%, transparent 50%);
        }

        .main-container {
            width: 100%;
            max-width: 600px;
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            text-align: center;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            color: var(--text-muted);
            margin-bottom: 30px;
            font-size: 1rem;
        }

        .post-display-area {
            background-color: #252525;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            min-height: 200px;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.1rem;
            white-space: pre-wrap; /* Preserves line breaks */
            word-wrap: break-word;
            line-height: 1.8;
            transition: all 0.3s ease;
        }

        .post-display-area:empty::before {
            content: "‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá...";
            color: var(--text-muted);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-generate {
            background-color: var(--primary-color);
        }

        .btn-generate:hover {
            background-color: var(--primary-hover);
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(106, 90, 205, 0.5);
        }

        .btn-copy {
            background-color: #555;
        }

        .btn-copy:hover {
            background-color: #666;
            transform: translateY(-3px);
        }

        .btn:active {
            transform: translateY(0);
        }
        
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-left-color: var(--primary-color);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: none;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

    </style>
</head>
<body>

    <main class="main-container">
        <h1>‚ú® Post Generator</h1>
        <p class="subtitle">‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶®‡¶§‡ßÅ‡¶® ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</p>

        <div id="post-display" class="post-display-area"></div>

        <div class="action-buttons">
            <button id="generate-btn" class="btn btn-generate">
                <span>üîÑ</span>
                <span>‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                <div class="loading-spinner"></div>
            </button>
            <button id="copy-btn" class="btn btn-copy">
                <span>üìã</span>
                <span>‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</span>
            </button>
        </div>
    </main>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAjcAv64YFJndEMptOWfGTmR5LG-8ymSdE",
            authDomain: "genaretor.firebaseapp.com",
            databaseURL: "https://genaretor-default-rtdb.firebaseio.com",
            projectId: "genaretor",
            storageBucket: "genaretor.firebasestorage.app",
            messagingSenderId: "44288000929",
            appId: "1:44288000929:web:06e297c4fae8ec22eb81e0",
            measurementId: "G-7MHR7R1NFL"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const postsRef = database.ref('posts');

        const generateBtn = document.getElementById('generate-btn');
        const copyBtn = document.getElementById('copy-btn');
        const postDisplay = document.getElementById('post-display');
        const spinner = generateBtn.querySelector('.loading-spinner');

        let allPosts = [];
        let currentPostIndex = -1;

        // Fetch all posts from the database
        function loadAllPosts() {
            postsRef.once('value', (snapshot) => {
                allPosts = [];
                if (snapshot.exists()) {
                    snapshot.forEach((childSnapshot) => {
                        allPosts.push(childSnapshot.val().content);
                    });
                }
                // Shuffle posts for a random feel
                allPosts.sort(() => Math.random() - 0.5);
            });
        }

        // Generate a new post
        function generatePost() {
            if (allPosts.length === 0) {
                postDisplay.textContent = "‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡¶ï‡ßá ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡¶≤‡ßÅ‡¶®‡•§";
                return;
            }

            // Show loading state
            generateBtn.disabled = true;
            spinner.style.display = 'inline-block';
            generateBtn.querySelector('span:nth-child(2)').textContent = '‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...';

            // Simulate a small delay for a better UX
            setTimeout(() => {
                currentPostIndex = (currentPostIndex + 1) % allPosts.length;
                const nextPost = allPosts[currentPostIndex];
                
                postDisplay.style.opacity = '0';
                setTimeout(() => {
                    postDisplay.textContent = nextPost;
                    postDisplay.style.opacity = '1';
                }, 300);

                // Reset button state
                generateBtn.disabled = false;
                spinner.style.display = 'none';
                generateBtn.querySelector('span:nth-child(2)').textContent = '‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®';
            }, 500);
        }

        // Copy the current post to clipboard
        async function copyPost() {
            const postText = postDisplay.textContent;
            if (!postText || postText.includes("‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßã‡¶∏‡ßç‡¶ü") || postText.includes("‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø")) {
                alert("‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§ ‡¶Ü‡¶ó‡ßá ‡¶è‡¶ï‡¶ü‡¶ø ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
                return;
            }

            try {
                await navigator.clipboard.writeText(postText);
                const originalText = copyBtn.querySelector('span:nth-child(2)').textContent;
                copyBtn.querySelector('span:nth-child(2)').textContent = '‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá!';
                copyBtn.style.backgroundColor = '#28a745';
                setTimeout(() => {
                    copyBtn.querySelector('span:nth-child(2)').textContent = originalText;
                    copyBtn.style.backgroundColor = '#555';
                }, 2000);
            } catch (err) {
                console.error('Failed to copy text: ', err);
                alert('‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶• ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§ ‡¶Ö‡¶®‡ßÅ‡¶ó‡ßç‡¶∞‡¶π ‡¶ï‡¶∞‡ßá ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
            }
        }

        // Event Listeners
        generateBtn.addEventListener('click', generatePost);
        copyBtn.addEventListener('click', copyPost);

        // Initial load
        loadAllPosts();
    </script>
</body>
</html>
